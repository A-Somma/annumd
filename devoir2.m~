%%DEVOIR 2

%% Question 2b)


%Posons y(x) = sin(x*pi)
%Alors y"(x) = -(pi^2)*(sin(x*pi))
%Et donc r(x) = (pi^2)*(sin(x*pi))
y = @(x) sin((x)*(pi));
r = @(x) ((pi)^2)*(sin((x)*(pi)));


n1 = 4;
n2 = 6;
x1 = [0 0.25 0.5 0.75 1];
x2 = [0 1/6 2/6 3/6 4/6 5/6 1];
reso1 = resolution(r, n1);
reso2 = resolution(r, n2);

%graph
figure(1);
plot(x1, reso1);
hold on;
plot(x2, reso2);

grid on; title("Courbe des approximations");
xlabel("x");
ylabel("y(x)");
legend({'reso1','reso2'},'Location','northeast', ...
    'FontSize',12,'FontWeight','bold')
hold off;

%% Question 2c)

ni = logspace(1, 3, 3);
disp(ni);
Eh = arrayfun(@maxErreur, ni);
disp(Eh);

%graph
figure(2)




%% Definition de fonctions locales

function maxErr = maxErreur(n)
    r = @(x) ((pi)^2)*(sin((x)*(pi)));
    y = @(x) sin((x)*(pi));
    xi = linspace(0, 1, n+1);
    yi = resolution(r, n);
    yx = arrayfun(y, xi);
    maxErr = max(yi-yx);
end
